–¶–µ –ø–æ–≤–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞ "–∑ –Ω—É–ª—è". –ú–∏ –ø–æ–±—É–¥—É—î–º–æ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É, –¥–µ **–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä** –∫–µ—Ä—É—î —Å–∏—Å—Ç–µ–º–æ—é, –∞ **Deploy-–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á** –∑–∞–π–º–∞—î—Ç—å—Å—è –ª–∏—à–µ —Å–∞–π—Ç–æ–º. –¶–µ –∑–∞–±–µ–∑–ø–µ—á—É—î –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä—ñ–≤–µ–Ω—å –±–µ–∑–ø–µ–∫–∏ –¥–ª—è Debian 13.

---

## –ï—Ç–∞–ø 1: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–∏ (–≤–∏–∫–æ–Ω—É—î –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä)

–ó–∞–π–¥—ñ—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø—ñ–¥ —Å–≤–æ—ó–º –æ—Å–Ω–æ–≤–Ω–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º (–∞–±–æ root) —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –±–∞–∑–æ–≤–µ –ü–ó.

```bash
# –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏
sudo apt update && sudo apt upgrade -y

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏—Ö –ø–∞–∫–µ—Ç—ñ–≤
sudo apt install -y curl git build-essential apache2 certbot python3-certbot-apache ufw

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Node.js v22 LTS
curl -fsSL https://deb.nodesource.com/setup_22.x | sudo -E bash -
sudo apt install -y nodejs

# –ê–∫—Ç–∏–≤—É—î–º–æ –º–æ–¥—É–ª—ñ Apache
sudo a2enmod proxy proxy_http rewrite headers
sudo systemctl restart apache2

```

---

## –ï—Ç–∞–ø 2: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏ —Ç–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

–°—Ç–≤–æ—Ä—é—î–º–æ –æ–∫—Ä–µ–º–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–ª—è –¥–µ–ø–ª–æ—é —Ç–∞ —ñ–∑–æ–ª—é—î–º–æ –π–æ–≥–æ.

```bash
# 1. –°—Ç–≤–æ—Ä—é—î–º–æ deploy-user
sudo adduser deploy-user

# 2. –°—Ç–≤–æ—Ä—é—î–º–æ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç—É —Ç–∞ –¥–∞—î–º–æ –ø—Ä–∞–≤–∞
sudo mkdir -p /var/www/movie-app
sudo chown -R deploy-user:www-data /var/www/movie-app
sudo chmod -R 775 /var/www/movie-app
sudo chmod g+s /var/www/movie-app

# 3. –ù–∞–ª–∞—à—Ç–æ–≤—É—î–º–æ Firewall
sudo ufw allow 'Apache Full'
sudo ufw allow ssh
sudo ufw --force enable

```

---

## –ï—Ç–∞–ø 3: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Apache —Ç–∞ SSL (–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä)

–°—Ç–≤–æ—Ä—ñ—Ç—å –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é, —è–∫–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î —Ç—Ä–∞—Ñ—ñ–∫ –Ω–∞ –ø–æ—Ä—Ç 3001, –¥–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ Node.js.

```bash
sudo nano /etc/apache2/sites-available/movie-app.conf

```

**–í—Å—Ç–∞–≤—Ç–µ –∫–æ–Ω—Ñ—ñ–≥:**

```apache
<VirtualHost *:80>
    ServerName vash-domen.com
    ServerAlias www.vash-domen.com

    ProxyPreserveHost On
    ProxyPass / http://localhost:3001/
    ProxyPassReverse / http://localhost:3001/

    ErrorLog ${APACHE_LOG_DIR}/movie-app-error.log
    CustomLog ${APACHE_LOG_DIR}/movie-app-access.log combined
</VirtualHost>

```

**–ê–∫—Ç–∏–≤—É–π—Ç–µ —Å–∞–π—Ç —Ç–∞ SSL:**

```bash
sudo a2ensite movie-app.conf
sudo a2dissite 000-default.conf
sudo systemctl restart apache2

# –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞ (–∑–∞–º—ñ–Ω—ñ—Ç—å –¥–æ–º–µ–Ω)
sudo certbot --apache -d vash-domen.com -d www.vash-domen.com

```

---

## –ï—Ç–∞–ø 4: –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫—É (–≤–∏–∫–æ–Ω—É—î deploy-user)

–¢–µ–ø–µ—Ä –ø–µ—Ä–µ–π–¥—ñ—Ç—å —É —Ä–µ–∂–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–µ–ø–ª–æ—é. **–í—ñ–¥—Ç–µ–ø–µ—Ä —É—Å—ñ –º–∞–Ω—ñ–ø—É–ª—è—Ü—ñ—ó –∑ –∫–æ–¥–æ–º —Ä–æ–±–∏–º–æ —Ç—ñ–ª—å–∫–∏ —Ç—É—Ç.**

```bash
# –ü–µ—Ä–µ–º–∏–∫–∞—î–º–æ—Å—å –Ω–∞ –¥–µ–ø–ª–æ–π-—é–∑–µ—Ä–∞
sudo su - deploy-user

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç—É
cd /var/www/movie-app

# –ö–ª–æ–Ω—É—î–º–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
git clone <URL_–í–ê–®–û–ì–û_–†–ï–ü–û–ó–ò–¢–û–†–Ü–Ø> .

# –°—Ç–≤–æ—Ä—é—î–º–æ —Ñ–∞–π–ª –∑ –∫–ª—é—á–∞–º–∏
nano .env
# –î–æ–¥–∞–π—Ç–µ: TMDB_TOKEN, INTERNAL_APP_SECRET, PORT=3001

```

**–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π —Ç–∞ –∑–∞–ø—É—Å–∫:**

```bash
npm install express axios dotenv cors
npm run build

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è PM2 (–≥–ª–æ–±–∞–ª—å–Ω–æ –¥–ª—è —Ü—å–æ–≥–æ —é–∑–µ—Ä–∞)
npm install -g pm2
pm2 start server.js --name movie-app
pm2 save

```

---

## –ï—Ç–∞–ø 5: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è –æ–Ω–æ–≤–ª–µ–Ω—å (`deploy.sh`)

–°—Ç–≤–æ—Ä—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç —É –¥–æ–º–∞—à–Ω—ñ–π –ø–∞–ø—Ü—ñ `/home/deploy-user/`, —â–æ–± –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —Å–∞–π—Ç –æ–¥–Ω—ñ—î—é –∫–æ–º–∞–Ω–¥–æ—é.

```bash
nano ~/deploy.sh

```

**–ö–æ–¥ —Å–∫—Ä–∏–ø—Ç—É:**

```bash
#!/bin/bash
PROJECT_PATH="/var/www/movie-app"

cd "$PROJECT_PATH" || exit

echo "--- üîÑ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–¥—É ---"
git pull origin main
npm install
npm run build

echo "üîê –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É..."
find . -type d -exec chmod 775 {} +
find . -type f -exec chmod 664 {} +

echo "üöÄ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä—É..."
pm2 restart movie-app || pm2 start server.js --name movie-app
pm2 save

echo "‚úÖ –ü—Ä–æ–µ–∫—Ç –æ–Ω–æ–≤–ª–µ–Ω–æ!"

```

`chmod +x ~/deploy.sh`

---

## –Ø–∫ —Ç–µ–ø–µ—Ä –∂–∏—Ç–∏ –∑ —Ü–∏–º —Å–µ—Ä–≤–µ—Ä–æ–º?

1. **–ü–æ–≤—Å—è–∫–¥–µ–Ω–Ω–∞ —Ä–æ–±–æ—Ç–∞**: –ö–æ–ª–∏ –≤–∏ –∑–º—ñ–Ω–∏–ª–∏ –∫–æ–¥ —ñ –∑—Ä–æ–±–∏–ª–∏ `git push`, –≤–∏ –∑–∞—Ö–æ–¥–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä —è–∫ `deploy-user` —ñ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞—î—Ç–µ:
```bash
./deploy.sh

```


–í–∞–º **–Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω sudo** –¥–ª—è —Ü—å–æ–≥–æ.
2. **–û–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏**: –¢—ñ–ª—å–∫–∏ —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏ Debian –∞–±–æ –∑–º—ñ–Ω–∏—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Apache, –≤–∏ –∑–∞—Ö–æ–¥–∏—Ç–µ –ø—ñ–¥ —Å–≤–æ—ó–º –æ—Å–Ω–æ–≤–Ω–∏–º –∞–¥–º—ñ–Ω-–∞–∫–∞—É–Ω—Ç–æ–º —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ `sudo`.
3. **–ë–µ–∑–ø–µ–∫–∞**: –ù–∞–≤—ñ—Ç—å —è–∫—â–æ –≤–∞—à `server.js` –º–∞—Ç–∏–º–µ –≤—Ä–∞–∑–ª–∏–≤—ñ—Å—Ç—å, –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –Ω–µ –∑–º–æ–∂–µ –≤–∏–π—Ç–∏ –∑–∞ –º–µ–∂—ñ –ø–∞–ø–∫–∏ `/var/www/movie-app`, –±–æ –≤—ñ–Ω –æ–±–º–µ–∂–µ–Ω–∏–π –ø—Ä–∞–≤–∞–º–∏ `deploy-user`.

