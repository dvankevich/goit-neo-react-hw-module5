# –ü–æ–≤–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞ "–∑ –Ω—É–ª—è" (–∑ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è–º–∏)

–¶–µ –æ–Ω–æ–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π —â–æ–¥–æ –±–µ–∑–ø–µ–∫–∏, —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó —Ç–∞ –∑—Ä—É—á–Ω–æ—Å—Ç—ñ. –ú–∏ –ø–æ–±—É–¥—É—î–º–æ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É, –¥–µ **–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä** –∫–µ—Ä—É—î —Å–∏—Å—Ç–µ–º–æ—é, –∞ **Deploy-–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á** –∑–∞–π–º–∞—î—Ç—å—Å—è –ª–∏—à–µ —Å–∞–π—Ç–æ–º. –¶–µ –∑–∞–±–µ–∑–ø–µ—á—É—î –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä—ñ–≤–µ–Ω—å –±–µ–∑–ø–µ–∫–∏ –¥–ª—è Debian 12 –∞–±–æ –Ω–æ–≤—ñ—à–µ (Debian 13 –º–æ–∂–µ –±—É—Ç–∏ –≤ —Å—Ç–∞–¥—ñ—ó —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è, —Ç–æ–º—É –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–µ—Ä—Å—ñ—é –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `lsb_release -a`).

**–ü–µ—Ä–µ–¥—É–º–æ–≤–∏:**
- –°–µ—Ä–≤–µ—Ä —Å–≤—ñ–∂–∏–π Debian 12+ –∑ SSH-–¥–æ—Å—Ç—É–ø–æ–º —è–∫ root –∞–±–æ sudo-–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á.
- –î–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, vash-domen.com) —Å–ø—Ä—è–º–æ–≤–∞–Ω–∏–π –Ω–∞ IP —Å–µ—Ä–≤–µ—Ä–∞.
- –ü—Ä–∏–≤–∞—Ç–Ω–∏–π Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π (—è–∫—â–æ public, –ø—Ä–æ–ø—É—Å—Ç—ñ—Ç—å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–ª—é—á—ñ–≤).
- –ó–º—ñ–Ω–Ω—ñ: –ó–∞–º—ñ–Ω—ñ—Ç—å `vash-domen.com` –Ω–∞ —Å–≤—ñ–π –¥–æ–º–µ–Ω, `<URL_–í–ê–®–û–ì–û_–†–ï–ü–û–ó–ò–¢–û–†–Ü–Ø>` –Ω–∞ URL repo, `3001` –Ω–∞ –ø–æ—Ä—Ç –¥–æ–¥–∞—Ç–∫—É —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ.

---
## –ï—Ç–∞–ø 0: –ë–∞–∑–æ–≤–∞ –±–µ–∑–ø–µ–∫–∞ SSH (–≤–∏–∫–æ–Ω—É—î –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä)
–ü–µ—Ä–µ–¥ –ø–æ—á–∞—Ç–∫–æ–º –Ω–∞–ª–∞—à—Ç—É–π—Ç–µ SSH –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –≤—ñ–¥ –∞—Ç–∞–∫. –¶–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è production.

```bash
# –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏ (—è–∫—â–æ —â–µ –Ω–µ –∑—Ä–æ–±–ª–µ–Ω–æ)
sudo apt update && sudo apt upgrade -y

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è fail2ban –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –≤—ñ–¥ brute-force
sudo apt install -y fail2ban

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è SSH: –ó–∞–±–æ—Ä–æ–Ω–∞ root-–ª–æ–≥—ñ–Ω—É —Ç–∞ –ø–∞—Ä–æ–ª—ñ–≤
sudo nano /etc/ssh/sshd_config
```
**–î–æ–¥–∞–π—Ç–µ/–∑–º—ñ–Ω—å—Ç–µ –≤ —Ñ–∞–π–ª—ñ:**
```
PermitRootLogin no
PasswordAuthentication no  # –ü—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–ª—é—á—ñ–≤
```
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ SSH
sudo systemctl restart ssh

# –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è SSH-–∫–ª—é—á—ñ–≤ (–Ω–∞ –≤–∞—à–æ–º—É –ª–æ–∫–∞–ª—å–Ω–æ–º—É –ü–ö, –Ω–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ)
ssh-keygen -t ed25519 -C "your_email@example.com"

# –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∫–ª—é—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∞–¥–º—ñ–Ω–∞
ssh-copy-id your-admin-user@server-ip

# –ü–æ–≤—Ç–æ—Ä—ñ—Ç—å –¥–ª—è deploy-user –ø—ñ—Å–ª—è –π–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è (–¥–∏–≤. –ï—Ç–∞–ø 2)
```

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–±–º–µ–∂–∏—Ç–∏ SSH –∑–∞ IP: –î–æ–¥–∞–π—Ç–µ –≤ `/etc/ssh/sshd_config` ‚Äì `AllowUsers your-admin-user@your-ip`.

---
## –ï—Ç–∞–ø 1: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–∏ (–≤–∏–∫–æ–Ω—É—î –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä)
–ó–∞–π–¥—ñ—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø—ñ–¥ —Å–≤–æ—ó–º –æ—Å–Ω–æ–≤–Ω–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º (–∞–±–æ root) —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –±–∞–∑–æ–≤–µ –ü–ó.

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–µ—Ä—Å—ñ—ó Debian
lsb_release -a  # –ü–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏ 12 –∞–±–æ –Ω–æ–≤—ñ—à–µ

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏—Ö –ø–∞–∫–µ—Ç—ñ–≤
sudo apt install -y curl git build-essential apache2 certbot python3-certbot-apache ufw apparmor fail2ban

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Node.js v22 LTS (–≥–ª–æ–±–∞–ª—å–Ω–æ, –∞–ª–µ –¥–ª—è deploy-user –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ nvm)
curl -fsSL https://deb.nodesource.com/setup_22.x | sudo -E bash -
sudo apt install -y nodejs

# –ê–∫—Ç–∏–≤—É—î–º–æ –º–æ–¥—É–ª—ñ Apache
sudo a2enmod proxy proxy_http rewrite headers

# –ê–∫—Ç–∏–≤—É—î–º–æ AppArmor –¥–ª—è Apache (–¥–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–∑–æ–ª—è—Ü—ñ—è)
sudo aa-enforce /etc/apparmor.d/usr.sbin.apache2

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Apache
sudo systemctl restart apache2
```

---
## –ï—Ç–∞–ø 2: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏ —Ç–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (–≤–∏–∫–æ–Ω—É—î –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä)
–°—Ç–≤–æ—Ä—é—î–º–æ –æ–∫—Ä–µ–º–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–ª—è –¥–µ–ø–ª–æ—é —Ç–∞ —ñ–∑–æ–ª—é—î–º–æ –π–æ–≥–æ.

```bash
# 1. –°—Ç–≤–æ—Ä—é—î–º–æ deploy-user
sudo adduser deploy-user

# –î–æ–¥–∞—î–º–æ –¥–æ –≥—Ä—É–ø–∏ www-data (–¥–ª—è Apache)
sudo usermod -aG www-data deploy-user

# 2. –°—Ç–≤–æ—Ä—é—î–º–æ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç—É —Ç–∞ –¥–∞—î–º–æ –ø—Ä–∞–≤–∞ (–æ–±–º–µ–∂–µ–Ω—ñ: 755 –¥–ª—è –ø–∞–ø–æ–∫, 644 –¥–ª—è —Ñ–∞–π–ª—ñ–≤)
sudo mkdir -p /var/www/movie-app
sudo chown -R deploy-user:www-data /var/www/movie-app
sudo chmod -R 755 /var/www/movie-app  # –î–ª—è –ø–∞–ø–æ–∫
sudo find /var/www/movie-app -type f -exec chmod 644 {} +  # –î–ª—è —Ñ–∞–π–ª—ñ–≤, —è–∫—â–æ –≤–∂–µ —î
sudo chmod g+s /var/www/movie-app

# 3. –ù–∞–ª–∞—à—Ç–æ–≤—É—î–º–æ Firewall
sudo ufw allow 'Apache Full'
sudo ufw limit ssh  # –û–±–º–µ–∂–µ–Ω–Ω—è —Å–ø—Ä–æ–± –ª–æ–≥—ñ–Ω—É
sudo ufw --force enable
```

–î–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ repo: –Ø–∫ deploy-user (–ø—ñ—Å–ª—è –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è), –∑–≥–µ–Ω–µ—Ä—É–π—Ç–µ –∫–ª—é—á—ñ:
```bash
sudo su - deploy-user
ssh-keygen -t ed25519 -C "deploy@example.com"
cat ~/.ssh/id_ed25519.pub  # –î–æ–¥–∞–π—Ç–µ —Ü–µ–π public key –¥–æ GitHub/GitLab
```

---
## –ï—Ç–∞–ø 3: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Apache —Ç–∞ SSL (–≤–∏–∫–æ–Ω—É—î –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä)
–°—Ç–≤–æ—Ä—ñ—Ç—å –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é, —è–∫–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î —Ç—Ä–∞—Ñ—ñ–∫ –Ω–∞ –ø–æ—Ä—Ç 3001, –¥–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ Node.js.

```bash
sudo nano /etc/apache2/sites-available/movie-app.conf
```
**–í—Å—Ç–∞–≤—Ç–µ –∫–æ–Ω—Ñ—ñ–≥ (–∑ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è–º–∏ –¥–ª—è –±–µ–∑–ø–µ–∫–∏):**
```apache
<VirtualHost *:80>
    ServerName vash-domen.com
    ServerAlias www.vash-domen.com
    ProxyRequests Off
    ProxyPreserveHost On
    ProxyPass / http://localhost:3001/
    ProxyPassReverse / http://localhost:3001/
    <Proxy *>
        Require all granted
    </Proxy>
    ErrorLog ${APACHE_LOG_DIR}/movie-app-error.log
    CustomLog ${APACHE_LOG_DIR}/movie-app-access.log combined
</VirtualHost>
```

**–ê–∫—Ç–∏–≤—É–π—Ç–µ —Å–∞–π—Ç —Ç–∞ SSL:**
```bash
# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É
sudo apache2ctl configtest

sudo a2ensite movie-app.conf
sudo a2dissite 000-default.conf
sudo systemctl restart apache2

# –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞ (–∑–∞–º—ñ–Ω—ñ—Ç—å –¥–æ–º–µ–Ω)
sudo certbot --apache -d vash-domen.com -d www.vash-domen.com

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤ (cron)
sudo crontab -e
```
**–î–æ–¥–∞–π—Ç–µ –≤ crontab:**
```
0 12 * * * /usr/bin/certbot renew --quiet && sudo systemctl reload apache2
```

---
## –ï—Ç–∞–ø 4: –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫—É (–≤–∏–∫–æ–Ω—É—î deploy-user)
–¢–µ–ø–µ—Ä –ø–µ—Ä–µ–π–¥—ñ—Ç—å —É —Ä–µ–∂–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–µ–ø–ª–æ—é. **–í—ñ–¥—Ç–µ–ø–µ—Ä —É—Å—ñ –º–∞–Ω—ñ–ø—É–ª—è—Ü—ñ—ó –∑ –∫–æ–¥–æ–º —Ä–æ–±–∏–º–æ —Ç—ñ–ª—å–∫–∏ —Ç—É—Ç.**

```bash
# –ü–µ—Ä–µ–º–∏–∫–∞—î–º–æ—Å—å –Ω–∞ –¥–µ–ø–ª–æ–π-—é–∑–µ—Ä–∞
sudo su - deploy-user

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è nvm –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó Node.js (—â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤)
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash
source ~/.nvm/nvm.sh  # –ê–±–æ –ø–µ—Ä–µ–ª–æ–≥—ñ–Ω—å—Ç–µ—Å—å
nvm install 22
nvm use 22

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç—É
cd /var/www/movie-app

# –ö–ª–æ–Ω—É—î–º–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π (—è–∫—â–æ –ø—Ä–∏–≤–∞—Ç–Ω–∏–π, –∫–ª—é—á—ñ –≤–∂–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ)
git clone <URL_–í–ê–®–û–ì–û_–†–ï–ü–û–ó–ò–¢–û–†–Ü–Ø> .

# –°—Ç–≤–æ—Ä—é—î–º–æ —Ñ–∞–π–ª –∑ –∫–ª—é—á–∞–º–∏
nano .env
# –î–æ–¥–∞–π—Ç–µ: TMDB_TOKEN=your_token, INTERNAL_APP_SECRET=your_secret, PORT=3001
chmod 600 .env  # –ó–∞—Ö–∏—Å—Ç —Å–µ–∫—Ä–µ—Ç—ñ–≤

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π (–ø—Ä–∏–ø—É—Å–∫–∞—î–º–æ package.json –≤ repo)
npm install

# Build, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É)
npm run build  # –Ø–∫—â–æ –Ω–µ–º–∞—î —Å–∫—Ä–∏–ø—Ç—É, –ø—Ä–æ–ø—É—Å—Ç—ñ—Ç—å

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è PM2 (–ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞)
npm install -g pm2

# –ó–∞–ø—É—Å–∫
pm2 start server.js --name movie-app
pm2 save
pm2 startup  # –î–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫—É –ø—ñ—Å–ª—è —Ä–µ–±—É—Ç–∞

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤
pm2 logs movie-app
```

---
## –ï—Ç–∞–ø 5: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è –æ–Ω–æ–≤–ª–µ–Ω—å (`deploy.sh`)
–°—Ç–≤–æ—Ä—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç —É –¥–æ–º–∞—à–Ω—ñ–π –ø–∞–ø—Ü—ñ `/home/deploy-user/`, —â–æ–± –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —Å–∞–π—Ç –æ–¥–Ω—ñ—î—é –∫–æ–º–∞–Ω–¥–æ—é.

```bash
nano ~/deploy.sh
```
**–ö–æ–¥ —Å–∫—Ä–∏–ø—Ç—É (–∑ error handling —Ç–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è–º):**
```bash
#!/bin/bash
set -e  # –í–∏—Ö—ñ–¥ –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ
PROJECT_PATH="/var/www/movie-app"
LOG_FILE="$HOME/deploy.log"
cd "$PROJECT_PATH" || { echo "–ü–æ–º–∏–ª–∫–∞: –ù–µ –≤–¥–∞–ª–æ—Å—è –ø–µ—Ä–µ–π—Ç–∏ –≤ $PROJECT_PATH" >> "$LOG_FILE"; exit 1; }
echo "--- üîÑ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–¥—É ---" | tee -a "$LOG_FILE"
git pull origin main || { echo "–ü–æ–º–∏–ª–∫–∞ git pull" >> "$LOG_FILE"; exit 1; }
npm install | tee -a "$LOG_FILE"
npm run build || echo "Build –Ω–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π, –ø—Ä–æ–¥–æ–≤–∂—É—î–º–æ" >> "$LOG_FILE"
# –ü—Ä–∞–≤–∞: –¢—ñ–ª—å–∫–∏ —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ, –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É–π—Ç–µ .env
# find . -type d -exec chmod 755 {} +
# find . -type f -exec chmod 644 {} +
echo "üöÄ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä—É..." | tee -a "$LOG_FILE"
pm2 restart movie-app || pm2 start server.js --name movie-app
pm2 save
pm2 startup
echo "‚úÖ –ü—Ä–æ–µ–∫—Ç –æ–Ω–æ–≤–ª–µ–Ω–æ!" | tee -a "$LOG_FILE"
```

```bash
chmod +x ~/deploy.sh
```

---
## –ï—Ç–∞–ø 6: –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥, –±–µ–∫–∞–ø–∏ —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è (–≤–∏–∫–æ–Ω—É—î –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä)
- **–õ–æ–≥—Ä–æ—Ç–µ–π—à–Ω**: `sudo apt install -y logrotate`. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –¥–ª—è Apache/PM2.
- **–ë–µ–∫–∞–ø–∏**: –°—Ç–≤–æ—Ä—ñ—Ç—å cron –¥–ª—è —â–æ—Ç–∏–∂–Ω–µ–≤–æ–≥–æ –±–µ–∫–∞–ø—É:
  ```bash
  sudo crontab -e
  ```
  **–î–æ–¥–∞–π—Ç–µ:**
  ```
  0 2 * * 0 rsync -a /var/www/movie-app /backup/movie-app-$(date +\%Y-\%m-\%d)  # –ó–º—ñ–Ω—ñ—Ç—å /backup –Ω–∞ –≤–∞—à—É –ø–∞–ø–∫—É
  ```
- **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**: –ü—ñ—Å–ª—è –¥–µ–ø–ª–æ—é –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ:
  ```bash
  curl http://localhost:3001  # –õ–æ–∫–∞–ª—å–Ω–æ
  curl https://vash-domen.com  # –ó–æ–≤–Ω—ñ
  ```
- **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥**: –†–æ–∑–≥–ª—è–Ω—å—Ç–µ Prometheus/Node Exporter –¥–ª—è —Ä–µ—Å—É—Ä—Å—ñ–≤ (–≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å —è–∫ –∞–¥–º—ñ–Ω: `sudo apt install -y prometheus-node-exporter`).

---
## –Ø–∫ —Ç–µ–ø–µ—Ä –∂–∏—Ç–∏ –∑ —Ü–∏–º —Å–µ—Ä–≤–µ—Ä–æ–º?
1. **–ü–æ–≤—Å—è–∫–¥–µ–Ω–Ω–∞ —Ä–æ–±–æ—Ç–∞**: –ö–æ–ª–∏ –≤–∏ –∑–º—ñ–Ω–∏–ª–∏ –∫–æ–¥ —ñ –∑—Ä–æ–±–∏–ª–∏ `git push`, –∑–∞—Ö–æ–¥–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä —è–∫ `deploy-user` (—á–µ—Ä–µ–∑ SSH-–∫–ª—é—á) —ñ –∑–∞–ø—É—Å–∫–∞—î—Ç–µ:
   ```bash
   ./deploy.sh
   ```
   –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –ª–æ–≥: `cat ~/deploy.log`. –í–∞–º **–Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω sudo** –¥–ª—è —Ü—å–æ–≥–æ.

2. **–û–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏**: –¢—ñ–ª—å–∫–∏ —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏ Debian –∞–±–æ –∑–º—ñ–Ω–∏—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Apache, –∑–∞—Ö–æ–¥–∏—Ç–µ –ø—ñ–¥ —Å–≤–æ—ó–º –æ—Å–Ω–æ–≤–Ω–∏–º –∞–¥–º—ñ–Ω-–∞–∫–∞—É–Ω—Ç–æ–º —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ `sudo`. –î–ª—è –æ–Ω–æ–≤–ª–µ–Ω—å: `sudo apt update && sudo apt upgrade -y`.

3. **–ë–µ–∑–ø–µ–∫–∞**: –ù–∞–≤—ñ—Ç—å —è–∫—â–æ –≤–∞—à `server.js` –º–∞—Ç–∏–º–µ –≤—Ä–∞–∑–ª–∏–≤—ñ—Å—Ç—å, –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –æ–±–º–µ–∂–µ–Ω–∏–π –ø—Ä–∞–≤–∞–º–∏ `deploy-user` —Ç–∞ –ø–∞–ø–∫–æ—é `/var/www/movie-app`. –†–µ–≥—É–ª—è—Ä–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –ª–æ–≥–∏: `sudo journalctl -u apache2`.

4. **–ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è**: –î–ª—è –∫—ñ–ª—å–∫–æ—Ö —Å–∞–π—Ç—ñ–≤ —Å—Ç–≤–æ—Ä—ñ—Ç—å –æ–∫—Ä–µ–º—ñ virtual hosts –≤ Apache —Ç–∞ –ø–∞–ø–∫–∏ (/var/www/app2 —Ç–æ—â–æ).

5. **–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏**: –Ø–∫—â–æ git pull –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—É—î, —Ä–æ–∑–≤'—è–∂—ñ—Ç—å –≤—Ä—É—á–Ω—É. –Ø–∫—â–æ Node –≤–µ—Ä—Å—ñ—ó –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—É—é—Ç—å, nvm –¥–æ–∑–≤–æ–ª—è—î –ø–µ—Ä–µ–º–∏–∫–∞—Ç–∏.

–¶—è —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –ø—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–∞ –Ω–∞ VM; –∞–¥–∞–ø—Ç—É–π—Ç–µ –ø—ñ–¥ –≤–∞—à –¥–æ–¥–∞—Ç–æ–∫ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–æ–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–∏—Ö –∑ –æ–∫—Ä–µ–º–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º –¥–ª—è MySQL/PostgreSQL). –Ø–∫—â–æ –¥–æ–¥–∞—Ç–æ–∫ –Ω–µ –º–∞—î "build", –≤–∏–¥–∞–ª—ñ—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π —Ä—è–¥–æ–∫.